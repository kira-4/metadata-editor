<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญุฑุฑ ุงูุฃุตูุงุช ุงูููุงุฆูุฉ</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-brand">
                <h1>๐ต ูุญุฑุฑ ุงูุฃุตูุงุช ุงูููุงุฆูุฉ</h1>
            </div>
            <div class="nav-links">
                <a href="#/pending" class="nav-link active" data-route="pending">
                    ูุงุฆูุฉ ุงูุงูุชุธุงุฑ
                    <span id="pendingBadge" class="nav-badge" style="display: none;">0</span>
                </a>
                <a href="#/library" class="nav-link" data-route="library">ูุญุฑุฑ ุงูููุชุจุฉ</a>
            </div>
        </nav>

        <!-- Pending Page (existing) -->
        <!-- Pending Page (existing) -->
        <div id="pendingPage" class="page-content">
            <main class="main-content">
                <div id="workflowSteps" class="workflow-steps" style="display: none;">
                    <div class="workflow-step active">1) ุงูุงุณุชูุฑุงุฏ</div>
                    <div class="workflow-step active">2) ุงูุชุดุงู ุงูุนููุงู/ุงูููุงู</div>
                    <div class="workflow-step active">3) ุงููุฑุงุฌุนุฉ ูุงูุชุนุฏูู</div>
                    <div class="workflow-step">4) ุญูุธ ุงูุจูุงูุงุช ุงููุตููุฉ</div>
                    <div class="workflow-step">5) ุงูุฅุฑุณุงู ุฅูู Navidrome</div>
                </div>

                <div class="pending-toolbar">
                    <button id="debugModeBtn" class="btn-secondary">ุชูุนูู ูุถุน ุงูุชุตุญูุญ</button>
                    <button id="refreshPendingBtn" class="btn-secondary">ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
                    <button id="toggleLogsBtn" class="btn-secondary" style="display: none;">ุฅุธูุงุฑ ุงูุณุฌูุงุช</button>
                    <button id="downloadLogsBtn" class="btn-secondary" style="display: none;">ุชูุฒูู ุงูุณุฌูุงุช</button>
                </div>

                <div id="globalAlert" class="global-alert" style="display: none;"></div>

                <div id="logPanel" class="log-panel" style="display: none;">
                    <div class="log-panel-header">
                        <h3>ุณุฌู ุงูุนูููุงุช</h3>
                    </div>
                    <pre id="logOutput" class="log-output"></pre>
                </div>

                <div class="queue-header">
                    <h2>ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</h2>
                    <span class="count" id="itemCount">0 ููู</span>
                </div>

                <div id="pendingItems" class="items-grid">
                    <!-- Items will be loaded here -->
                </div>

                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">๐</div>
                    <h3>ูุง ุชูุฌุฏ ูููุงุช ูู ุงูุงูุชุธุงุฑ</h3>
                    <p>ุณูุชู ุนุฑุถ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู ุนูุฏ ุงูุชุดุงููุง</p>
                </div>
            </main>
        </div>

        <!-- Library Page (new) -->
        <div id="libraryPage" class="page-content" style="display: none;">
            <!-- Library Controls -->
            <div class="library-controls">
                <div class="library-header">
                    <h2>ููุชุจุฉ ุงูุตูุชูุงุช</h2>
                    <div class="library-actions">
                        <button id="multiSelectBtn" class="btn-secondary">
                            ุชุญุฏูุฏ ูุชุนุฏุฏ
                        </button>
                        <button id="rescanBtn" class="btn-secondary">
                            <span id="rescanIcon">๐</span>
                            ุฅุนุงุฏุฉ ุงููุณุญ
                        </button>
                        <div class="library-stats" id="libraryStats">
                            <span class="stat-item">...</span>
                        </div>
                    </div>
                </div>

                <!-- View Mode Tabs -->
                <div class="view-tabs">
                    <button class="tab-btn active" data-view="artists">ุงูููุงููู</button>
                    <button class="tab-btn" data-view="albums">ุงูุฃูุจููุงุช</button>
                    <button class="tab-btn" data-view="genres">ุงูุฃููุงุน</button>
                    <button class="tab-btn" data-view="tracks">ุฌููุน ุงูุตูุชูุงุช</button>
                </div>

                <!-- Search and Sort -->
                <div class="search-sort-bar">
                    <div class="search-row">
                        <input type="text" id="librarySearch" class="search-input" placeholder="ุจุญุซ...">
                        <button id="mobileFiltersToggle" class="btn-secondary mobile-filters-toggle" type="button" aria-expanded="false" aria-controls="libraryAdvancedControls">
                            ุงููุฑุฒ
                        </button>
                    </div>
                    <div id="libraryAdvancedControls" class="library-advanced-controls">
                        <select id="librarySort" class="sort-select">
                            <option value="name-asc">ุงูุงุณู (ุฃ - ู)</option>
                            <option value="name-desc">ุงูุงุณู (ู - ุฃ)</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- View Content -->
            <div id="artistsView" class="view-content active">
                <div id="artistsList" class="items-list"></div>
                <div class="empty-state"><p>ูุง ุชูุฌุฏ ููุงููู</p></div>
            </div>

            <div id="albumsView" class="view-content">
                <div id="albumsList" class="albums-grid"></div>
                <div class="empty-state"><p>ูุง ุชูุฌุฏ ุฃูุจููุงุช</p></div>
            </div>

            <div id="genresView" class="view-content">
                <div id="genresList" class="items-list"></div>
                <div class="empty-state"><p>ูุง ุชูุฌุฏ ุฃููุงุน ุตูุชูุฉ</p></div>
            </div>

            <div id="tracksView" class="view-content">
                <div id="tracksList" class="items-list"></div>
                <div class="empty-state"><p>ูุง ุชูุฌุฏ ุตูุชูุงุช</p></div>
            </div>

            <!-- Pagination Controls -->
            <div id="libraryPagination" class="pagination-controls" style="display: none;">
                <button id="prevPageBtn" class="btn-secondary">ุงูุณุงุจู</button>
                <span id="pageInfo">ุตูุญุฉ 1</span>
                <button id="nextPageBtn" class="btn-secondary">ุงูุชุงูู</button>
            </div>

            <!-- Detail Views -->
            <div id="detailView" class="view-content" style="display: none;">
                <button id="backBtn" class="btn-secondary">โ ุฑุฌูุน</button>
                <h3 id="detailTitle"></h3>
                <div id="detailContent" class="items-list"></div>
            </div>

            <!-- Selection Bar -->
            <div id="selectionBar" class="selection-bar" style="display: none;">
                <div class="selection-info">
                    <span id="selectionCount">0 ูุญุฏุฏ</span>
                    <span id="selectionDetails"></span>
                </div>
                <div class="selection-actions">
                    <button id="editSelectedBtn" class="btn-primary">ุชุนุฏูู ุงูููุชุงุฏุงุชุง</button>
                    <button id="clearSelectionBtn" class="btn-secondary">ุฅูุบุงุก ุงูุชุญุฏูุฏ</button>
                </div>
            </div>
        </div>

        <!-- Batch Edit Modal -->
        <div id="batchEditModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>ุชุนุฏูู ุงูููุชุงุฏุงุชุง</h3>
                <form id="batchEditForm">
                    <div class="form-group">
                        <label>ุงูุนููุงู</label>
                        <input type="text" id="batchTitle" class="field-input">
                        <label><input type="checkbox" id="batchTitleKeep" checked> ุนุฏู ุงูุชุบููุฑ</label>
                    </div>
                    <div class="form-group">
                        <label>ุงูููุงู</label>
                        <div id="libraryEditArtistCombobox" class="library-artist-combobox">
                            <input
                                type="text"
                                id="batchArtist"
                                class="field-input library-artist-input"
                                autocomplete="off"
                                role="combobox"
                                aria-autocomplete="list"
                                aria-expanded="false"
                                aria-haspopup="listbox"
                                aria-controls="libraryArtistSuggestions"
                            >
                            <button type="button" id="libraryArtistDropdownToggle" class="library-artist-dropdown-toggle" aria-label="ุงูุชุฑุงุญุงุช ุงูููุงู">
                                <span class="artist-dropdown-icon">โพ</span>
                            </button>
                            <div class="artist-suggestions library-artist-suggestions" id="libraryArtistSuggestions" role="listbox"></div>
                        </div>
                        <label><input type="checkbox" id="batchArtistKeep" checked> ุนุฏู ุงูุชุบููุฑ</label>
                    </div>
                    <div class="form-group">
                        <label>ุงูุฃูุจูู</label>
                        <input type="text" id="batchAlbum" class="field-input">
                        <label><input type="checkbox" id="batchAlbumKeep" checked> ุนุฏู ุงูุชุบููุฑ</label>
                    </div>
                    <div class="form-group">
                        <label>ุงูููุน</label>
                        <input type="text" id="batchGenre" class="field-input">
                        <label><input type="checkbox" id="batchGenreKeep" checked> ุนุฏู ุงูุชุบููุฑ</label>
                    </div>
                    <div class="form-group">
                        <label>ุงูุณูุฉ</label>
                        <input type="number" id="batchYear" class="field-input">
                        <label><input type="checkbox" id="batchYearKeep" checked> ุนุฏู ุงูุชุบููุฑ</label>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary">ุญูุธ</button>
                        <button type="button" id="cancelBatchEdit" class="btn-secondary">ุฅูุบุงุก</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
